<hr>

:warning: **The maintenance and support of this project has been moved to a [new repository](https://github.com/Spellhold-Studios/Rupert-the-Dye-Merchant).**

<hr><br>

![Latest Release](https://img.shields.io/github/v/release/SpellholdStudios/Rupert_the_Dye_Merchant?include_prereleases&color=darkred)<a name="top" id="top"> </a>
![Platform](https://img.shields.io/static/v1?label=platform&message=windows%20%7C%20macos%20%7C%20linux&color=informational)
![Language](https://img.shields.io/static/v1?label=language&message=English%20%7C%20French%20%7C%20German%20%7C%20Italian%20%7C%20Russian%20%7C%20Spanish&color=limegreen)

<div align="center"><h1></a>Rupert the Dye Merchant</h1>

<h3>A mod hosted by Spellhold Studios for Baldur's Gate II and ToB (classical and EE games),<br>
BG:EE, SoD Tutu, Baldur's Gate Trilogy and EET<h3>

</div><br />


**Original Author:** vilkacis  
**Mod Website:** <a href="http://www.shsforums.net/forum/234-miscellaneous-released-mods/">Spellhold Studios</a>  
**Mod Forum:** <a href="http://www.shsforums.net/topic/24786-rupert-the-dye-merchant-v300/">Rupert the Dye Merchant</a>  


[Read the mod's readme](https://spellholdstudios.github.io/readmes/rupert-readme-english.html)

[Download the mod at Spellhold Studios](http://www.shsforums.net/files/file/153-rupert-the-dye-merchant/)<br>

&nbsp;

<div align="center">
<a href="#intro">Overview</a> &#x2B25; <a href="#compat">Compatibility</a> &#x2B25; <a href="#installation">Installation</a> &#x2B25; <a href="#components">Components</a> &#x2B25; <a href="#credits">Credits</a> &#x2B25; <a href="#versions">Versions History</a></br>
</div>

<hr>


## <a name="intro" id="intro"></a>Overview

This mod adds a new merchant who sells various dyes and new outfits.

Dyes work like potions. These can be used by anyone, and will permanently change the user's colours as specified by the particular dye: there are separate options for major and minor colours, leather (belts/boots/straps), armour, decorative items (like belt buckles/amulets) and hair.

Outfits will change the the character's appearance to match the specified class: fighter, mage, thief or cleric. (I strongly suggested that you also install everything from <a href="http://www.shsforums.net/files/file/1006-1ppv410/">One Pixel Productions</a>.)</b> These can be used by anyone but monks (which would look wonky). Halflings have no mage avatars and will use the gnome mage avatar instead. Half-Orcs have no mage paperdolls in the unmodded game, meaning you won't see your character on the inventory screen (unless you install the 1PP update, which adds one).

All changes are purely cosmetic; you do not gain or lose abilities by using anything bought from Rupert's stores.

Rupert will appear in the Mithrest Inn in BG2:SoA, as well as in Saradush and Amkethran inns if Throne of Bhaal is installed. In BG:EE, SoD, TuTu, BGT and EET, he will also appear in a room on the second floor of the Friendly Arm Inn (the second from the left on the top-left side of the screen).


<hr>


## <a name="compat" id="compat"></a>Compatibility

This mod is designed to work on the following Infinity Engine games: the original Baldur's Gate II (BG2, or just SoA) with or without the Throne of Bhaal (ToB) expansion, Baldur's Gate II: Enhanced Edition (BG2:EE), Baldur's Gate: Enhanced Edition (BGEE) with or without the Siege of Dragonspear expansion, the conversion projects <a href="http://www.shsforums.net/forum/261-bgt-weidu/">Baldur's Gate Trilogy (BGT)</a>, <a href="http://www.pocketplane.net/mambo/index.php?option=com_content&task=blogcategory&id=143&Itemid=98">Baldur's Gate Tutu (<acronym title="Baldur's Gate 'To Two'">Tutu</acronym>)</a> and <a href="https://github.com/K4thos/EET/releases">Enhanced Edition Trilogy (EET)</a>.

This is a WeiDU mod, and therefore should be compatible with all WeiDU mods. If you encounter any bugs, please <a href="http://www.shsforums.net/topic/40883-red-dragon-summoning-spell-weidu-version/">report them on the forum!</a><br>

>Although it is not required for Rupert the Dye Merchant to function properly, classical game players are strongly recommended to download and install the latest version of the <a href="http://www.gibberlings3.net/bg2fixpack/">BG2 Fixpack</a> before proceeding with the installation of this mod.<br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="installation" id="installation"></a>Installation

#### Notes

*If you've previously installed the mod, remove it before extracting the new version. To do this, run **`setup-rupert.exe`**, un-install all previously installed main component and delete the :file_folder: **rupert** folder.*

*When installing or un-installing, **do not close the DOS window** by clicking on the **X** button! Instead, press the **Enter** key whenever instructed to do so.*

*__Disable any antivirus__ or other memory-resident software before installing this or any other mod. Some (particularly avast and Norton!) have a tendency to report false positives with mod activity, resulting in failed installs.*

## 

#### Special Note for Siege of Dragonspear from Steam/GOG

Good Old Games (GOG) and Steam both package the additional content for Siege of Dragonspear in a method that WeiDU, the tool used to install this mod, cannot access. You must run a program called <a href="https://github.com/Argent77/A7-DlcMerger/releases/latest">DLC Merger</a> on your SoD installation before you can install this or any other WeiDU-based mod.

## 

#### Enhanced Editions Note

The Enhanced Editions are actively supported games. Please note that every patch update will wipe your current mod setup! If in the middle of a modded game you might want to delay the patch update (if possible) as even after reinstalling the mods, you might not be able to continue with your old savegames. Alternatively, copy the whole game's folder into a new one that can be modded and will stay untouched by game patches. It is important that you install the mod to the language version you are playing the game in. Otherwise, the dialogues of the mod will not show but give error messages.

## 

#### Windows

Rupert the Dye Merchant for Windows is distributed as an extractable compressed archive and includes a WeiDU installer.

Extract the contents of the mod archive into the folder of the game you wish to modify (*the folder which contains the "CHITIN.KEY" file*), using <a href="http://www.7-zip.org/download.html">7zip</a>, <a href="http://www.rarlab.com/download.htm">WinRAR</a>, or another file compression utility that handles .zip files. On successful extraction, there should be a :file_folder: rupert folder and a setup-rupert.exe file in your game folder. To install, simply double-click **`setup-rupert.exe`** and follow the instructions on screen.

Run **`setup-rupert.exe`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Mac OS X

Rupert the Dye Merchant for Mac OS X is distributed is distributed in the same compressed archive and includes a WeiDU installer.

First, extract the files from the archive into your game directory. On successful extraction, there should be a :file_folder: rupert folder, setup-rupert and setup-rupert.command files in your game folder. To install, simply double-click **`setup-rupert.command`** and follow the instructions on screen.

Run **`setup-rupert.command`** in your game folder to reinstall, un-install or otherwise change the components settings.

## 

#### Linux

Rupert the Dye Merchant for Linux is distributed in the same compressed archive and does not include a WeiDU installer.

Extract the contents of the mod to the folder of the game you wish to modify.

Download the latest version of WeiDU for Linux from <a href="https://github.com/WeiDUorg/weidu/releases">WeiDU.org</a> and copy weidu and weinstall to /usr/bin. Following that, open a terminal, **cd** to your game installation directory, run tolower and answer 'Y' to both queries. You can avoid running the second option (linux.ini) if you've already ran it once in the same directory. To save time, the archive is already tolowered, so there's no need to run the first option (lowercasing file names) either if you've extracted only this mod since the last time you lowercased file names. If you're unsure, running tolower and choosing both options is the safe bet.

To install, run **`weinstall setup-rupert`** in your game folder. Then run **`wine BGMain.exe`** (or **`wine Baldur.exe`** for EE games) and start playing.

## 

#### Note for Complete Un-installation

In addition to the methods above for removing individual components, you can completely un-install the mod using **`setup-rupert --uninstall`** at the command line to remove all components without wading through prompts.</br>
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="credits" id="credits"></a>Credits and Acknowledgements

**Author:** <a href="http://www.shsforums.net/user/6209-vilkacis/">vilkacis</a>

## 

#### Special Acknowledgements to:

- <a href="http://www.spellholdstudios.net/">Spellhold Studios</a> team for hosting the mod (<a href="http://www.shsforums.net">Forums</a>).
- Special thanks to <a href="http://www.shsforums.net/user/5803-miloch/">Miloch</a> and <a href="http://www.shsforums.net/user/9003-leomar/">Leomar</a> for help with bams, updating and... stuff. Y'know. Things.
- Gwendolyne: French translation.
- BWP Russian Textpack team: Russian translation.
- ilot: Italian translation.
- Lisandro: Spanish translation.
- Meresin: German translation.
- AL|EN: Wrote <a href="https://forums.beamdog.com/discussion/78364/infinity-auto-packager-automatically-generate-and-adds-mod-packages-to-release-when-you-publish-it">Infinity Auto Packager</a> tool which automatically provides Windows, Linux and Mac versions in the same archive file.

If you wish to translate the mod, have a suggestion, or should encounter any bugs, please report them to the maintainers at the <a href="http://www.shsforums.net/topic/24786-rupert-the-dye-merchant-v300/">mod forum</a>.</br>

## 

#### Copyrights Information

###### Rupert the Dye Merchant is not developed, supported, or endorsed by BioWare&trade; or Interplay/BlackIsle, Overhaul, Beamdog or the Wizards of the Coast. It was developed by Coco_Pliz, based on material from the game Baldur's Gate II and its expansion.
###### All mod content is &copy;Coco_Pliz.
###### Baldur's Gate II: Shadows of Amn and Baldur's Gate II: Throne of Bhaal &copy; TSR, Inc. The BioWare Infinity Engine is &copy; BioWare Corp. All other trademarks and copyrights are property of their respective owners.

###### Public domain: no rights reserved. May be freely copied, edited and distributed
<div align="right"><a href="#top">Back to top</a></div>


<hr>


## <a name="versions" id="versions"></a>Versions History

##### Version 3.0.0 (June 16, 2020)

- Added *rupert.ini* metadata file to support AL|EN's "Project Infinity".
- Renamed *setup-rupert.tp2* -> *rupert.tp2* to support AL|EN's "Project Infinity".
- Replaced `AUTHOR` keyword with `SUPPORT`.
- Added `HANDLE_CHARSETS` function to convert string entries for EE games.
- Added `REQUIRE_PREDICATE` conditions to avoid installing the mod in inaccurate games.
- Added component `DESIGNATED` number and "*rupert_the_dye_merchant*" `LABEL`.
- Added native BG:EE, BG2:EE and EET compatibility.
- Commented code as much as possible.
- Rewrote store patching process.
- Simplified Rupert spawning and script `EXTEND_TOP` process with cross-platforms tutu variables.
- Converted inventory BAMs to EE: This feature attempts to modify traditional inventory BAMs so that both the large and small icons are utilized by the EE games. The inventory BAM must have two sequences, the first containing the "large" inventory icon frame and the second containing the "small" inventory icon frame to be processed. Inventory icon BAMs in the bam folder that meet these requirements are patched and saved back to the override folder.
- Included BWP Fixpack patch: fixed wrong header icons.
- Added foreign languages WeiDU prompts whenever possible.
- Added French translation (Gwendolyne).
- Added Russian translation (BWP Russian Textpack team).
- Restored German translation.
- Fixed typos in English .tra files.
- Re-formated, updated and renamed readme file to *rupert-readme-english.html*, then moved it into new "*readme*" folder.
- Removed useless files and "*backup*" folder.
- Reorganized mod architecture tree: created or renamed folders to sort files according to their types.
- Lower cased files.
- Included Linux and Mac Os X versions in the same package (thanks AL|EN's Infinity Auto Packager tool!).
- Added archive libiconv-1.9.2-1-src.7z with iconv licence info.
- Updated WeiDU installer to v246.
- Uploaded mod to official Spellhold Studios GitHub mirror account.

## 

##### Version 2.1.1 (March 20, 2010)

- Added Italian translation by ilot.

## 

##### Version 2.1 (March 19, 2010)

- Added Spanish translation by Lisandro.
- Fixed a gnome-related typo in the code (thanks <a href="http://www.shsforums.net/topic/24786-rupert-the-dye-merchant-v300/page-3#entry472779">Lollorian</a>).

## 

##### Version 2.0 (December 23, 2009)

- Added "*outfits*" to Rupert's store.
- Re-arranged dyes: lower numbers are now at the top, rather than the bottom.
- English only so far.

## 

##### Version 1.1 (November 25, 2009)

- Included <a href="http://www.shsforums.net/topic/24786-rupert-the-dye-merchant-v300/page-3#entry463770">Miloch's .bam and .itm fixes</a>.
- Traified the mod.
- Added German translation by Meresin.
- Changed to `README` command.
- Added `VERSION` flag.
- Updated WeiDU installer to v211.

## 

##### Version 1.0 (February 23, 2007)

- Initial release.
<div align="right"><a href="#top">Back to top</a></div>

